<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><base href=https://zmsy.co/><title>zmsy | The Switch to Webpack 4</title><meta name=og:title content="The Switch to Webpack 4"><meta name=description content="In the era of React-driven pages, Webpack is a powerful tool to have in your belt. Here's how the transition worked for this site."><meta name=og:description content="In the era of React-driven pages, Webpack is a powerful tool to have in your belt. Here's how the transition worked for this site."><link rel=stylesheet href=https://zmsy.co/css/main.3fa81bcff7c54050eb068ba13350724528fe2eb2fc09179d33580cb282003512.css integrity="sha256-P6gbz/fFQFDrBouhM1ByRSj+LrL8CRedM1gMsoIANRI="><link rel=icon type=image/png href=https://zmsy.co/media/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://zmsy.co/media/favicon-16x16.png sizes=16x16><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/zmsy.co\/"},"name":"The Switch to Webpack 4","headline":"The Switch to Webpack 4","description":"In the era of React-driven pages, Webpack is a powerful tool to have in your belt. Here\u0027s how the transition worked for this site.","inLanguage":"en-US","author":"Zach Morrissey","creator":"Zach Morrissey","publisher":"Zach Morrissey","copyrightHolder":"Zach Morrissey","copyrightYear":"2022","datePublished":"2018-01-31","dateModified":"2022-04-11T20:12:19Z","url":"https:\/\/zmsy.co\/blog\/from-gulp-to-webpack-4\/","keywords":["Blog"]}</script></head><body><div class="columns is-centered" id=navbar-columns><div class="column is-10 is-12-touch" id=navbar-column><nav class=navbar role=navigation id=top><div class=navbar-brand><a class=navbar-item href=https://zmsy.co/><figure class="color-responsive-svg logo-img"><!doctype html><svg width="100%" height="100%" viewBox="0 0 209 209" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><circle cx="170.833" cy="33.333" r="33.333" style="fill:#9665c7"/><circle cx="127.778" cy="175" r="33.333" style="fill:#3a89c9"/><circle cx="37.5" cy="175" r="33.333" style="fill:#d85d44"/><circle cx="80.556" cy="33.333" r="33.333" style="fill:#fbd136"/><path d="M37.5 175V66.667" style="fill:none;stroke:#38332a;stroke-width:14.58px"/><path d="M127.778 175V66.667" style="fill:none;stroke:#38332a;stroke-width:14.58px"/><path d="M170.833 137.514V33.333" style="fill:none;stroke:#38332a;stroke-width:14.58px"/><path d="M80.556 137.514V33.333" style="fill:none;stroke:#38332a;stroke-width:14.58px"/></svg></figure></a><a class=navbar-item href=https://zmsy.co/><div class=is-3 id=logo-text>zmsy.co</div></a><span class=navbar-burger id=navbar-toggle><span></span><span></span><span></span></span></div><div class=navbar-menu><div class=navbar-end><a class="navbar-item is-hidden-mobile" href=https://www.linkedin.com/in/zmsy><span class=icon-linkedin-square title="View my LinkedIn profile."></span></a><a class="navbar-item is-hidden-mobile" href=https://github.com/zmsy><span class=icon-github title="Check out my Github."></span></a><a class="navbar-item is-hidden-mobile" href=https://twitter.com/_zmsy><span class=icon-twitter title="Check out my sparsely used Twitter account."></span></a><a class="navbar-item is-tab" href=https://zmsy.co/>Home</a>
<a class="navbar-item is-tab" href=https://zmsy.co/blog>Blog</a>
<a class="navbar-item is-tab" href=https://zmsy.co/projects>Projects</a>
<a class="navbar-item is-tab" href=https://zmsy.co/about>About</a></div></div></nav></div></div><div id=body><div class="columns is-centered is-desktop"><div class="column is-8 is-12-touch"><section class=section><div class=blog-post><h2><a class="title title-dark blog-title is-size-1-touch" href=https://zmsy.co/blog/from-gulp-to-webpack-4/>The Switch to Webpack 4</a></h2><p class=meta>written by
<a href=https://twitter.com/_zmsy>Zach Morrissey</a>
on 2018-06-09</p><figure class="color-responsive-svg hero-diamonds"><svg viewBox="0 0 140 30" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41"><path d="M24.21 14.6 13.61 4 3 14.6l10.6 10.61 10.61-10.6zm28 0L41.61 4 31 14.6l10.6 10.61 10.61-10.6zm28 0L69.61 4 59 14.6l10.6 10.61 10.61-10.6zm28 0L97.61 4 87 14.6l10.6 10.61 10.61-10.6zm29 0L126.61 4 116 14.6l10.6 10.61 10.61-10.6z" style="fill:#38332a"/></svg></figure><div class=content><img src=https://zmsy.co/blog/from-gulp-to-webpack-4/gulp_to_webpack.png alt="Gulp to Webpack Transition" loading=lazy><p>I&rsquo;ve always been interested in using Webpack to generate this site, but the heavily config-oriented earlier versions of Webpack (2.x, 3.x) were a hassle. The <a href=https://gulpjs.com/>explicit pipelines from Gulp</a> were always significantly easier. Yet, after using <a href=https://nuxtjs.org/>Nuxt.js</a> for a recent project–which works exceedingly well with Webpack–I decided that it was time to jump on the bandwagon.</p><h2 id=reasons-for-switching>Reasons for Switching</h2><p>Gulp is very good at creating flexible tasks to be run on a regular basis. Webpack and Gulp, however, are two separate tools with completely different aims.</p><h3 id=the-good>The Good</h3><ul><li>Outside of NPM itself, <a href=https://stateofjs.com/2017/build-tools/results>Webpack is the most popular build tool today</a>, with about a 45% increase in users who have used it and would like to use it again.</li><li><a href=https://github.com/lektor/lektor-webpack-support>Webpack has a built-in integration with Lektor</a>, it made for a better development story once all the kinks were worked out.</li><li>Webpack is a module bundler by default. If you orient your assets in a way that Webpack can consume them, you&rsquo;ll end up bundling their outputs nicely into a single file like you expected.</li><li><a href=https://medium.com/webpack/webpack-4-released-today-6cdb994702d4#dfa8>Webpack 4 has &lsquo;zero config&rsquo; options</a>. The configuration file is a well-known pain point for Webpack, as it tends to create a lot of headaches very quickly. Being able to replace my ailing, convoluted Webpack 2/3 config files with defaults was appealing to me.</li><li>The move to &lsquo;convention over configuration&rsquo; is approaching. Sane defaults, opinionated by common methods, and tooling built for the majority of use cases.</li><li>Includes splitting into &lsquo;prod&rsquo; and &lsquo;dev&rsquo; modes by default. It was always possible, but this is a major part of the webpack API now.</li></ul><h3 id=the-bad>The Bad</h3><ul><li>Webpack documentation is confusing, sparse, and littered with examples that either make no sense or have been broken by version upgrades. Finding working examples is <em>very</em> difficult.</li><li>NPM module configuration for Webpack is a major source of frustration, because libraries are getting replaced & deprecated so quickly that what may have worked today is not guaranteed to work a few months from now.</li><li>NPM package installation and management is still more difficult than it seems like it should be. Since NPM packages take a more Unix-like &lsquo;single function&rsquo; approach, it drastically increases the amount of dependencies per project (this website has 754 dependencies right now).</li><li>Transitioning from a working Webpack 2/3 config to Webpack 4 (either using config or zero-config options) is difficult.</li></ul><h2 id=what-does-it-look-like>What does it look like?</h2><h4 id=previously---gulp>Previously - Gulp</h4><p>Gulp pipelines usually have 1 or more inputs of the same filetype, and then produce explicit outputs using pipes.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#09f;font-style:italic>// Process main scss for the site.
</span><span style=color:#09f;font-style:italic></span>gulp.task(<span style=color:#c30>&#39;main-css&#39;</span>, <span style=color:#069;font-weight:700>function</span>() {
    <span style=color:#069;font-weight:700>return</span> gulp.src(<span style=color:#c30>&#39;./src/index.scss&#39;</span>)
        .pipe(rename(<span style=color:#c30>&#39;main.min.css&#39;</span>))
        .pipe(source_maps.init())
        .pipe(sass({ outputStyle<span style=color:#555>:</span> <span style=color:#c30>&#39;expanded&#39;</span> }))
        .pipe(clean_css())
        .pipe(source_maps.write(<span style=color:#c30>&#39;.&#39;</span>))
        .pipe(gulp.dest(<span style=color:#c30>&#39;../assets/css/&#39;</span>));
});
</code></pre></div><p>Gulp tasks operate on inputs and outputs, so you don&rsquo;t necessarily need to set things up so that they rely on one another.</p><h4 id=now---webpack>Now - Webpack</h4><p>Whereas Webpack configs look to an entrypoint (normally <code>./src/index.js</code> by convention) and bundle all of the dependencies for that file.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#069;font-weight:700>const</span> path <span style=color:#555>=</span> require(<span style=color:#c30>&#39;path&#39;</span>);
<span style=color:#069;font-weight:700>const</span> MiniCssExtractPlugin <span style=color:#555>=</span> require(<span style=color:#c30>&#39;mini-css-extract-plugin&#39;</span>);

module.exports <span style=color:#555>=</span> {
  mode<span style=color:#555>:</span> <span style=color:#c30>&#34;production&#34;</span>,
  output<span style=color:#555>:</span> {
    path<span style=color:#555>:</span> path.dirname(__dirname) <span style=color:#555>+</span> <span style=color:#c30>&#39;/assets/static/gen&#39;</span>,
    filename<span style=color:#555>:</span> <span style=color:#c30>&#34;[name].js&#34;</span>
  },
  plugins<span style=color:#555>:</span> [
    <span style=color:#069;font-weight:700>new</span> MiniCssExtractPlugin({
      filename<span style=color:#555>:</span> <span style=color:#c30>&#34;main.css&#34;</span>,
      chunkFilename<span style=color:#555>:</span> <span style=color:#c30>&#34;[name].css&#34;</span>
    })
  ],
  module<span style=color:#555>:</span> {
    rules<span style=color:#555>:</span> [
      {
        test<span style=color:#555>:</span> <span style=color:#3aa>/\.scss$/</span>,
        use<span style=color:#555>:</span> [
          MiniCssExtractPlugin.loader,
          <span style=color:#c30>&#39;style-loader&#39;</span>,
          <span style=color:#c30>&#39;sass-loader&#39;</span>
        ]
      }
    ]
  }
};
</code></pre></div><p>In prior versions of Webpack it was required to make many more things explicit, compared to now where you can opt to use conventional inputs/outputs instead of specifying them.</p><h2 id=lessons-learned>Lessons Learned</h2><p>The biggest struggle in using Webpack is bridging the gap between the concepts and the implementation.</p><ul><li>The concepts are well established and internally consistent. <a href=https://webpack.js.org/concepts/>Check out the documentation</a> if you&rsquo;re curious about what any of the terms / verbs used in Webpack-speak mean.</li><li>The implementation is where things are difficult. It&rsquo;s very tough to translate the concepts espoused in how Webpack <em>should</em> operate to how it actually <em>does</em> operate.<ul><li>Things like &lsquo;entry&rsquo; or &lsquo;loaders&rsquo; are simple enough to understand, but are difficult to translate into working functionality.</li><li>Error messages need improvement. It&rsquo;s very tough to take information there and use it.</li></ul></li></ul><p>That said, considering the difficulties, module bundling with Webpack is <em>still</em> worth it even after all of that. Simplifying your build process from separate pipelines using Gulp/Grunt/etc into a single build process using a dependency graph is a drastic improvement in paradigm.</p><p>If you&rsquo;re just trying to process some Sass files, I would stick to Gulp.</p></div></div></section></div></div></div><footer class=footer><div class="container has-text-centered"><p><figure class="color-responsive-svg footer-dots"><svg viewBox="0 0 262 6" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M128.2 1.1c-1.3 1.6-.5 2.6-.3 2m131.6.5c.8-.5-.6.7-1 .4-.3-.1.7-.4.5-.4M2.1 1.7c1 0 .4.2.3.4m59 .9c-.5.2 1.5-.7 1-.3m131.7-.6c0 .8-1.8 1.5-1.3 2.1.5.6 1.2-1.8 1.2-.5.0.8-2.2 1.3-2.2.5" fill="none" stroke="#faf9f9" stroke-width="2"/><path d="M61.7 1.4c-.7.8.6.3.7.5.2.4-.6 1.6-.8 1.2.0-.2.5.0.3.0m67-1.1c-.3-.8-1 1.2-1.2.3.0-.6 1.2-.5 1.3-.1.0.0-1.1.5-1.1.8M2.7 2.3c-.4.1.3 1 0 1.1-.3.2.0-1.2.3-1.2.4.0-.2.8-.4.3.0-.3.0-.8.5-.9v.5c0-.3.3-.8-.1-1-.2-.2-.3.4-.5.6-.2.0-.5-.2-.4-.4.0.0.8.3.5.7-.3.3-.5-.3-.5-.3-.2.0.0.5-.1.6-.2.2-1.2.4-.8.9.3.3.9-.9.9-.9L1.8 2s-1 .7-.7.7c.2.0.3-.6.4-.7m258.9 1.5c.5-.3-.2.3-.5.2-.2-.2-.2-.7.1-.7.5.0.0 1.4-.3 1.3-.2-.1-.2-1.2.1-1.2s.3.8.0.8c-.4.0-.5-1.1-.2-1 .2.0-.4 1-.5.9l.1-.5v.8" fill="none" stroke="#faf9f9" stroke-width="2"/></svg></figure></p><div id=footer-icons><a href=https://www.linkedin.com/in/zmsy><span class=icon-linkedin-square title="View my LinkedIn profile."></span></a><a href=https://github.com/zmsy><span class=icon-github title="Check out my Github."></span></a><a href=https://twitter.com/_zmsy><span class=icon-twitter title="Check out my sparsely used Twitter account."></span></a></div><p id=footer-text><strong>zmsy.co</strong> - by Zach Morrissey</p><p>Copyright © 2022</p></div></footer><script type=text/javascript src=https://zmsy.co/ts/index.2b7b95ede0f1ad83b7a212be597766dc2b24b5ced70c166862a14acfa0a4ba2a.js integrity="sha256-K3uV7eDxrYO3ohK+WXdm3Csktc7XDBZoYqFKz6Ckuio=" defer></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-104524581-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>