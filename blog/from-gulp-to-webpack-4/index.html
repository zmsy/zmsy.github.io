<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><base href=https://zmsy.co/><title>zmsy | The Switch to Webpack 4</title><meta name=og:title content="The Switch to Webpack 4"><meta name=description content="In the era of React-driven pages, Webpack is a powerful tool to have in your belt. Here's how the transition worked for this site."><meta name=og:description content="In the era of React-driven pages, Webpack is a powerful tool to have in your belt. Here's how the transition worked for this site."><link rel=stylesheet href=https://zmsy.co/css/main.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css><link href="https://fonts.googleapis.com/css?family=Patua+One|Work+Sans&display=swap" rel=stylesheet><link rel=icon type=image/png href=https://zmsy.co/media/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://zmsy.co/media/favicon-16x16.png sizes=16x16><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/zmsy.co\/"},"name":"The Switch to Webpack 4","headline":"The Switch to Webpack 4","description":"In the era of React-driven pages, Webpack is a powerful tool to have in your belt. Here\u0027s how the transition worked for this site.","inLanguage":"en-US","author":"Zach Morrissey","creator":"Zach Morrissey","publisher":"Zach Morrissey","accountablePerson":"Zach Morrissey","copyrightHolder":"Zach Morrissey","copyrightYear":"2022","datePublished":"2018-01-31","dateModified":"2022-01-18T06:30:03Z","url":"https:\/\/zmsy.co\/blog\/from-gulp-to-webpack-4\/","keywords":["Blog"]}</script></head><body><div class="columns is-centered" id=navbar-columns><div class="column is-10 is-12-touch" id=navbar-column><nav class=navbar role=navigation id=top><div class=navbar-brand><a class=navbar-item href=https://zmsy.co/><img id=logo-img src=https://zmsy.co/media/logo.svg alt="zmsy.co - Home"></a>
<a class=navbar-item href=https://zmsy.co/><div class=is-3 id=logo-text>zmsy.co</div></a><span class=navbar-burger id=navbar-toggle><span></span><span></span><span></span></span></div><div class=navbar-menu><div class=navbar-end><a class="navbar-item is-hidden-touch" href=https://www.linkedin.com/in/zmsyco><span class=icon><i class="fa fa-linkedin-square" title="View my LinkedIn profile."></i></span></a><a class="navbar-item is-hidden-touch" href=https://github.com/zmsy><span class=icon><i class="fa fa-github" title="Check out my Github."></i></span></a><a class="navbar-item is-hidden-touch" href=https://twitter.com/_zmsy><span class=icon><i class="fa fa-twitter" title="Check out my sparsely used Twitter account."></i></span></a><a class="navbar-item is-tab" href=https://zmsy.co/>Home</a>
<a class="navbar-item is-tab" href=https://zmsy.co/blog>Blog</a>
<a class="navbar-item is-tab" href=https://zmsy.co/projects>Projects</a>
<a class="navbar-item is-tab" href=https://zmsy.co/about>About</a></div></div></nav></div></div><div id=body><div class="columns is-centered is-desktop"><div class="column is-8 is-12-touch"><section class=section><div class=blog-post><h2><a class="title title-dark is-size-2-touch" href=https://zmsy.co/blog/from-gulp-to-webpack-4/>The Switch to Webpack 4</a></h2><p class=meta>written by
<a href=https://twitter.com/_zmsy>Zach Morrissey</a>
on 2018-06-09</p><img class=image id=hero-diamonds src=https://zmsy.co/img/diamonds-dark.svg><div class=content><figure><img src=https://zmsy.co/blog/from-gulp-to-webpack-4/gulp_to_webpack.png alt="Gulp to Webpack Transition"></figure><p>I&rsquo;ve always been interested in using Webpack to generate this site, but the heavily config-oriented earlier versions of Webpack (2.x, 3.x) were a hassle. The <a href=https://gulpjs.com/>explicit pipelines from Gulp</a> were always significantly easier. Yet, after using <a href=https://nuxtjs.org/>Nuxt.js</a> for a recent project–which works exceedingly well with Webpack–I decided that it was time to jump on the bandwagon.</p><h2 id=reasons-for-switching>Reasons for Switching</h2><p>Gulp is very good at creating flexible tasks to be run on a regular basis. Webpack and Gulp, however, are two separate tools with completely different aims.</p><h3 id=the-good>The Good</h3><ul><li>Outside of NPM itself, <a href=https://stateofjs.com/2017/build-tools/results>Webpack is the most popular build tool today</a>, with about a 45% increase in users who have used it and would like to use it again.</li><li><a href=https://github.com/lektor/lektor-webpack-support>Webpack has a built-in integration with Lektor</a>, it made for a better development story once all the kinks were worked out.</li><li>Webpack is a module bundler by default. If you orient your assets in a way that Webpack can consume them, you&rsquo;ll end up bundling their outputs nicely into a single file like you expected.</li><li><a href=https://medium.com/webpack/webpack-4-released-today-6cdb994702d4#dfa8>Webpack 4 has &lsquo;zero config&rsquo; options</a>. The configuration file is a well-known pain point for Webpack, as it tends to create a lot of headaches very quickly. Being able to replace my ailing, convoluted Webpack 2/3 config files with defaults was appealing to me.</li><li>The move to &lsquo;convention over configuration&rsquo; is approaching. Sane defaults, opinionated by common methods, and tooling built for the majority of use cases.</li><li>Includes splitting into &lsquo;prod&rsquo; and &lsquo;dev&rsquo; modes by default. It was always possible, but this is a major part of the webpack API now.</li></ul><h3 id=the-bad>The Bad</h3><ul><li>Webpack documentation is confusing, sparse, and littered with examples that either make no sense or have been broken by version upgrades. Finding working examples is <em>very</em> difficult.</li><li>NPM module configuration for Webpack is a major source of frustration, because libraries are getting replaced & deprecated so quickly that what may have worked today is not guaranteed to work a few months from now.</li><li>NPM package installation and management is still more difficult than it seems like it should be. Since NPM packages take a more Unix-like &lsquo;single function&rsquo; approach, it drastically increases the amount of dependencies per project (this website has 754 dependencies right now).</li><li>Transitioning from a working Webpack 2/3 config to Webpack 4 (either using config or zero-config options) is difficult.</li></ul><h2 id=what-does-it-look-like>What does it look like?</h2><h4 id=previously---gulp>Previously - Gulp</h4><p>Gulp pipelines usually have 1 or more inputs of the same filetype, and then produce explicit outputs using pipes.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#09f;font-style:italic>// Process main scss for the site.
</span><span style=color:#09f;font-style:italic></span>gulp.task(<span style=color:#c30>&#39;main-css&#39;</span>, <span style=color:#069;font-weight:700>function</span>() {
    <span style=color:#069;font-weight:700>return</span> gulp.src(<span style=color:#c30>&#39;./src/index.scss&#39;</span>)
        .pipe(rename(<span style=color:#c30>&#39;main.min.css&#39;</span>))
        .pipe(source_maps.init())
        .pipe(sass({ outputStyle<span style=color:#555>:</span> <span style=color:#c30>&#39;expanded&#39;</span> }))
        .pipe(clean_css())
        .pipe(source_maps.write(<span style=color:#c30>&#39;.&#39;</span>))
        .pipe(gulp.dest(<span style=color:#c30>&#39;../assets/css/&#39;</span>));
});
</code></pre></div><p>Gulp tasks operate on inputs and outputs, so you don&rsquo;t necessarily need to set things up so that they rely on one another.</p><h4 id=now---webpack>Now - Webpack</h4><p>Whereas Webpack configs look to an entrypoint (normally <code>./src/index.js</code> by convention) and bundle all of the dependencies for that file.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#069;font-weight:700>const</span> path <span style=color:#555>=</span> require(<span style=color:#c30>&#39;path&#39;</span>);
<span style=color:#069;font-weight:700>const</span> MiniCssExtractPlugin <span style=color:#555>=</span> require(<span style=color:#c30>&#39;mini-css-extract-plugin&#39;</span>);

module.exports <span style=color:#555>=</span> {
  mode<span style=color:#555>:</span> <span style=color:#c30>&#34;production&#34;</span>,
  output<span style=color:#555>:</span> {
    path<span style=color:#555>:</span> path.dirname(__dirname) <span style=color:#555>+</span> <span style=color:#c30>&#39;/assets/static/gen&#39;</span>,
    filename<span style=color:#555>:</span> <span style=color:#c30>&#34;[name].js&#34;</span>
  },
  plugins<span style=color:#555>:</span> [
    <span style=color:#069;font-weight:700>new</span> MiniCssExtractPlugin({
      filename<span style=color:#555>:</span> <span style=color:#c30>&#34;main.css&#34;</span>,
      chunkFilename<span style=color:#555>:</span> <span style=color:#c30>&#34;[name].css&#34;</span>
    })
  ],
  module<span style=color:#555>:</span> {
    rules<span style=color:#555>:</span> [
      {
        test<span style=color:#555>:</span> <span style=color:#3aa>/\.scss$/</span>,
        use<span style=color:#555>:</span> [
          MiniCssExtractPlugin.loader,
          <span style=color:#c30>&#39;style-loader&#39;</span>,
          <span style=color:#c30>&#39;sass-loader&#39;</span>
        ]
      }
    ]
  }
};
</code></pre></div><p>In prior versions of Webpack it was required to make many more things explicit, compared to now where you can opt to use conventional inputs/outputs instead of specifying them.</p><h2 id=lessons-learned>Lessons Learned</h2><p>The biggest struggle in using Webpack is bridging the gap between the concepts and the implementation.</p><ul><li>The concepts are well established and internally consistent. <a href=https://webpack.js.org/concepts/>Check out the documentation</a> if you&rsquo;re curious about what any of the terms / verbs used in Webpack-speak mean.</li><li>The implementation is where things are difficult. It&rsquo;s very tough to translate the concepts espoused in how Webpack <em>should</em> operate to how it actually <em>does</em> operate.<ul><li>Things like &lsquo;entry&rsquo; or &lsquo;loaders&rsquo; are simple enough to understand, but are difficult to translate into working functionality.</li><li>Error messages need improvement. It&rsquo;s very tough to take information there and use it.</li></ul></li></ul><p>That said, considering the difficulties, module bundling with Webpack is <em>still</em> worth it even after all of that. Simplifying your build process from separate pipelines using Gulp/Grunt/etc into a single build process using a dependency graph is a drastic improvement in paradigm.</p><p>If you&rsquo;re just trying to process some Sass files, I would stick to Gulp.</p></div></div></section></div></div></div><footer class=footer><div class="container has-text-centered"><p id=footer-text><strong>zmsy.co</strong> - A personal blog by Zach Morrissey. Copyright © 2022. Hosted via <a href=https://pages.github.com/>Github Pages</a>.</p><p><img class=footer-dots src=https://zmsy.co/img/footer.svg alt="Five horizontal hand-drawn dots."></p></div></footer><script type=text/javascript src=https://zmsy.co/ts/index.js></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-104524581-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>