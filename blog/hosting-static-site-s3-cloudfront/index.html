<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><base href=https://zmsy.co/><title>zmsy | Hosting a Static Site on S3 & Cloudfront</title><meta name=og:title content="Hosting a Static Site on S3 & Cloudfront"><meta name=description content="S3 is a powerful option for hosting static websites these days. Combined with the rise of static-site generators, these are tools that can have you publishing new functionality very quickly."><meta name=og:description content="S3 is a powerful option for hosting static websites these days. Combined with the rise of static-site generators, these are tools that can have you publishing new functionality very quickly."><link rel=stylesheet href=https://zmsy.co/css/main.20cfde98d93088b34d5587e963ca18edb165e6343b58ae2507b6f9e3f797badb.css integrity="sha256-IM/emNkwiLNNVYfpY8oY7bFl5jQ7WK4lB7b54/eXuts="><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css><link href="https://fonts.googleapis.com/css?family=Patua+One|Work+Sans&display=swap" rel=stylesheet><link rel=icon type=image/png href=https://zmsy.co/media/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://zmsy.co/media/favicon-16x16.png sizes=16x16><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/zmsy.co\/"},"name":"Hosting a Static Site on S3 \u0026 Cloudfront","headline":"Hosting a Static Site on S3 \u0026 Cloudfront","description":"S3 is a powerful option for hosting static websites these days. Combined with the rise of static-site generators, these are tools that can have you publishing new functionality very quickly.","inLanguage":"en-US","author":"Zach Morrissey","creator":"Zach Morrissey","publisher":"Zach Morrissey","copyrightHolder":"Zach Morrissey","copyrightYear":"2022","datePublished":"2018-01-31","dateModified":"2022-04-08T19:14:25Z","url":"https:\/\/zmsy.co\/blog\/hosting-static-site-s3-cloudfront\/","keywords":["Blog"]}</script></head><body><div class="columns is-centered" id=navbar-columns><div class="column is-10 is-12-touch" id=navbar-column><nav class=navbar role=navigation id=top><div class=navbar-brand><a class=navbar-item href=https://zmsy.co/><figure class="color-responsive-svg logo-img"><!doctype html><svg width="100%" height="100%" viewBox="0 0 209 209" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><circle cx="170.833" cy="33.333" r="33.333" style="fill:#9665c7"/><circle cx="127.778" cy="175" r="33.333" style="fill:#3a89c9"/><circle cx="37.5" cy="175" r="33.333" style="fill:#d85d44"/><circle cx="80.556" cy="33.333" r="33.333" style="fill:#fbd136"/><path d="M37.5 175V66.667" style="fill:none;stroke:#38332a;stroke-width:14.58px"/><path d="M127.778 175V66.667" style="fill:none;stroke:#38332a;stroke-width:14.58px"/><path d="M170.833 137.514V33.333" style="fill:none;stroke:#38332a;stroke-width:14.58px"/><path d="M80.556 137.514V33.333" style="fill:none;stroke:#38332a;stroke-width:14.58px"/></svg></figure></a><a class=navbar-item href=https://zmsy.co/><div class=is-3 id=logo-text>zmsy.co</div></a><span class=navbar-burger id=navbar-toggle><span></span><span></span><span></span></span></div><div class=navbar-menu><div class=navbar-end><a class="navbar-item is-hidden-touch" href=https://www.linkedin.com/in/zmsy><span class=icon><i class="fa fa-linkedin-square" title="View my LinkedIn profile."></i></span></a><a class="navbar-item is-hidden-touch" href=https://github.com/zmsy><span class=icon><i class="fa fa-github" title="Check out my Github."></i></span></a><a class="navbar-item is-hidden-touch" href=https://twitter.com/_zmsy><span class=icon><i class="fa fa-twitter" title="Check out my sparsely used Twitter account."></i></span></a><a class="navbar-item is-tab" href=https://zmsy.co/>Home</a>
<a class="navbar-item is-tab" href=https://zmsy.co/blog>Blog</a>
<a class="navbar-item is-tab" href=https://zmsy.co/projects>Projects</a>
<a class="navbar-item is-tab" href=https://zmsy.co/about>About</a></div></div></nav></div></div><div id=body><div class="columns is-centered is-desktop"><div class="column is-8 is-12-touch"><section class=section><div class=blog-post><h2><a class="title title-dark is-size-2-touch" href=https://zmsy.co/blog/hosting-static-site-s3-cloudfront/>Hosting a Static Site on S3 & Cloudfront</a></h2><p class=meta>written by
<a href=https://twitter.com/_zmsy>Zach Morrissey</a>
on 2018-04-25</p><figure class="color-responsive-svg hero-diamonds"><svg viewBox="0 0 140 30" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41"><path d="M24.21 14.6 13.61 4 3 14.6l10.6 10.61 10.61-10.6zm28 0L41.61 4 31 14.6l10.6 10.61 10.61-10.6zm28 0L69.61 4 59 14.6l10.6 10.61 10.61-10.6zm28 0L97.61 4 87 14.6l10.6 10.61 10.61-10.6zm29 0L126.61 4 116 14.6l10.6 10.61 10.61-10.6z" style="fill:#38332a"/></svg></figure><div class=content><p>Considering this site is <a href=https://zmsy.co/blog/blog-versions>built with a static site generator</a>, I needed to find somewhere to host it. Amazon&rsquo;s S3 service, as it turns out, actually has <a href=https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html>an option to host a website out of it</a>, which is ridiculously convenient for those who are comfortable using AWS services. Prior to this, I had purchased my domain through Namecheap.</p><h3 id=requirements>Requirements</h3><p>S3 + Cloudfront met all of my pretty simple set of requirements that I wanted to enforce:</p><ul><li><strong>HTTPS</strong> - Site has to be secured with a valid certificate.</li><li><strong>Custom Domain</strong> - For professionalism and consistency.</li><li><strong>Easy Deployment</strong> - Should be able to push files easily, or have a CI/CD tool listen to my git repo to push things up.</li></ul><p>Hosting in S3 seemed to be a very straightforward way of achieving these things, so I decided to go with it.</p><h2 id=setting-up-s3-for-static-web-hosting>Setting Up S3 for Static Web Hosting</h2><p>Setting up S3 for hosting a static site is as simple as checking a box. First create a bucket for your site.</p><img src=https://zmsy.co/blog/hosting-static-site-s3-cloudfront/static_bucket.png alt="Static Bucket Settings"><p>On that menu, select your default landing document (something along the lines of index.html) and error document (i.e. 404.html or something like that).</p><img src=https://zmsy.co/blog/hosting-static-site-s3-cloudfront/website_options.png alt="Website Options"><h2 id=setting-bucket-permissions>Setting Bucket Permissions</h2><p>Once you&rsquo;ve created your static site bucket and configured it for hosting, you need to set permissions on the bucket to allow GET requests.</p><p>Under the permissions tab, edit your permissions to allow s3:GetObject permissions to public.</p><img src=https://zmsy.co/blog/hosting-static-site-s3-cloudfront/bucket_permissions.png alt="S3 Bucket Policy Editor"><div class="admonition admonition-warning"><p>This will make this bucket public. Do not keep sensitive data of any sort in it once you&rsquo;ve made this change.</p></div><h3 id=dont-need-https-youre-done>Don&rsquo;t Need HTTPS? You&rsquo;re Done!</h3><p>At this point, if you&rsquo;re not interested in setting up your site to work with HTTPS, then you can call it quits at this point. S3 will provide you with a public URL that you can reach to see the site now:</p><p><code>http://&lt;your_bucket_name_here>.s3-website-&lt;region>.amazonaws.com/</code></p><p>You can point your domain at this URL and boom, you&rsquo;re done.</p><h2 id=creating-a-cloudfront-distribution>Creating a Cloudfront Distribution</h2><p>If you do want HTTPS, and <a href=https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-https>you should want HTTPS</a>, on your site, you&rsquo;ll need to create a Cloudfront distribution, Amazon&rsquo;s CDN, in order to provide secure connections.</p><p>Create a new web distribution, with the following options selected:</p><ul><li><strong>Origin Domain Name</strong> - Amazon will automatically populate your S3 bucket in the dropdown, but you should use the full S3 website URL: <code>&lt;your_bucket_name_here>.s3-website-&lt;region>.amazonaws.com</code></li><li><strong>Viewer Protocol Policy</strong> - Choose what you want to support, but I chose &lsquo;Redirect HTTP to HTTPS&rsquo; here.</li><li><strong>Alternate Domain Names (CNAMEs)</strong> - This is how you&rsquo;ll link your domain to the Cloudfront distribution, so you should put your domain in here.</li><li><strong>Default Root Object</strong> - This should be the same as the landing document you specified in your S3 bucket website option (i.e.<code>index.html</code>).</li><li><strong>Price Class</strong> - One noted option if you want to save on hosting costs is to select the US/Canada/Europe only price class.</li><li><strong>Custom SSL Certificate</strong> - By default, the distribution uses the Cloudfront certificate, but you should request your own if you&rsquo;re hosting on a custom domain. Which brings us to our next section&mldr;</li></ul><h2 id=request-an-ssl-certificate>Request an SSL Certificate</h2><p>In order to secure your site with HTTPS, you can request a certificate through AWS Certificate Manager for your domain. You&rsquo;ll have to be able to prove you own the domain either through <a href=https://docs.aws.amazon.com/acm/latest/userguide/gs-acm-validate-dns.html>DNS validation</a> or by <a href=https://docs.aws.amazon.com/acm/latest/userguide/gs-acm-validate-email>email validation</a>. I used email validation.</p><p>There&rsquo;s a number of email addresses that AWS will send out a confirmation email to, <a href=https://docs.aws.amazon.com/acm/latest/userguide/gs-acm-validate-email.html>listed here</a>. Your domain provider should have options for forwarding email if you don&rsquo;t have it set up through them.</p><p>Once you&rsquo;re done with the certificate business, you can submit that Cloudfront distribution, which will take some time to set up.</p><h2 id=registering-your-cloudfront-distribution-with-your-domain-provider>Registering Your Cloudfront Distribution with Your Domain Provider</h2><p>Once your cloudfront distribution is set up, you should now have a URL you can access with your site like this:</p><p><code>a983qewr90asf.cloudfront.net</code></p><p>Once you&rsquo;ve got that URL, all you need to do is set up CNAME records in your domain provider, which will allow your domain to redirect to the Cloudfront distribution. For my site, I wanted to set it up using the bare domain, i.e. <code>zmsy.co</code> instead of <code>www.zmsy.co</code>.</p><p>I set up a CNAME record and a URL redirect in this way:</p><table><thead><tr><th>Type</th><th>Host</th><th>Value</th></tr></thead><tbody><tr><td>CNAME</td><td>@</td><td>a983qewr90asf.cloudfront.net</td></tr><tr><td>URL Redirect</td><td>@</td><td><a href=https://a983qewr90asf.cloudfront.net>https://a983qewr90asf.cloudfront.net</a></td></tr></tbody></table><h2 id=thats-a-wrap>That&rsquo;s a Wrap!</h2><p>You&rsquo;ll be up and running once your domain is redirecting correctly. Now, once you push objects up to S3, they should populate out to the Cloudfront distribution automatically (albeit sometimes at a random schedule, since it&rsquo;s a CDN that operates on its own time). Plenty of toolkits have S3 as a built-in endpoint, so setting up deployment either through a CLI or from a CI/CD server is relatively straightforward.</p><p>At the time I wrote this, Github Pages <a href=https://help.github.com/articles/securing-your-github-pages-site-with-https/>wasn&rsquo;t offering HTTPS but have just announced support</a>, and was primarily built using Jekyll. I&rsquo;ll be checking that one out soon too.</p></div></div></section></div></div></div><footer class=footer><div class="container has-text-centered"><p><figure class="color-responsive-svg footer-dots"><svg viewBox="0 0 262 6" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M128.2 1.1c-1.3 1.6-.5 2.6-.3 2m131.6.5c.8-.5-.6.7-1 .4-.3-.1.7-.4.5-.4M2.1 1.7c1 0 .4.2.3.4m59 .9c-.5.2 1.5-.7 1-.3m131.7-.6c0 .8-1.8 1.5-1.3 2.1.5.6 1.2-1.8 1.2-.5.0.8-2.2 1.3-2.2.5" fill="none" stroke="#faf9f9" stroke-width="2"/><path d="M61.7 1.4c-.7.8.6.3.7.5.2.4-.6 1.6-.8 1.2.0-.2.5.0.3.0m67-1.1c-.3-.8-1 1.2-1.2.3.0-.6 1.2-.5 1.3-.1.0.0-1.1.5-1.1.8M2.7 2.3c-.4.1.3 1 0 1.1-.3.2.0-1.2.3-1.2.4.0-.2.8-.4.3.0-.3.0-.8.5-.9v.5c0-.3.3-.8-.1-1-.2-.2-.3.4-.5.6-.2.0-.5-.2-.4-.4.0.0.8.3.5.7-.3.3-.5-.3-.5-.3-.2.0.0.5-.1.6-.2.2-1.2.4-.8.9.3.3.9-.9.9-.9L1.8 2s-1 .7-.7.7c.2.0.3-.6.4-.7m258.9 1.5c.5-.3-.2.3-.5.2-.2-.2-.2-.7.1-.7.5.0.0 1.4-.3 1.3-.2-.1-.2-1.2.1-1.2s.3.8.0.8c-.4.0-.5-1.1-.2-1 .2.0-.4 1-.5.9l.1-.5v.8" fill="none" stroke="#faf9f9" stroke-width="2"/></svg></figure></p><p id=footer-text><strong>zmsy.co</strong> - by Zach Morrissey</p><p>Copyright © 2022</p></div></footer><script type=text/javascript src=https://zmsy.co/ts/index.2b7b95ede0f1ad83b7a212be597766dc2b24b5ced70c166862a14acfa0a4ba2a.js integrity="sha256-K3uV7eDxrYO3ohK+WXdm3Csktc7XDBZoYqFKz6Ckuio=" defer></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-104524581-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>